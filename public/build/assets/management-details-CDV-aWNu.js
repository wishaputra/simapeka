document.addEventListener("DOMContentLoaded",function(){document.getElementById("open-add-section-modal").addEventListener("click",function(){new bootstrap.Modal(document.getElementById("addSectionModal")).show()}),document.getElementById("addSectionForm").addEventListener("submit",function(o){o.preventDefault();const n=document.getElementById("sectionTitle").value,t=document.getElementById("sectionOrder").value,c=document.getElementById("submit-add-section").getAttribute("data-course-id"),r=document.querySelector('meta[name="csrf-token"]').getAttribute("content");fetch(`/dev/corpu2/simapeka/public/courses/${c}/sections`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r},body:JSON.stringify({title:n,order:t})}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{e.success?location.reload():alert(e.message||"An error occurred.")}).catch(e=>{console.error("Error:",e),alert("Something went wrong. Please try again.")})}),document.querySelectorAll(".delete-section").forEach(o=>{o.addEventListener("click",function(){const n=this.getAttribute("data-id");confirm("Are you sure you want to delete this section?")&&fetch(`/dev/corpu2/simapeka/public/courses/sections/${n}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":"{{ csrf_token() }}"}}).then(t=>t.json()).then(t=>{t.success?location.reload():alert(t.message||"An error occurred.")})})})});
