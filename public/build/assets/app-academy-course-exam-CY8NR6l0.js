document.addEventListener("DOMContentLoaded",function(){const m=JSON.parse(document.getElementById("examData").dataset.questions),s=parseInt(document.getElementById("examData").dataset.passingScore),l=document.getElementById("examData").dataset.examId;document.querySelectorAll(".question-nav").forEach(t=>{t.addEventListener("click",function(){document.querySelectorAll(".question").forEach(o=>o.style.display="none");const e=this.getAttribute("data-target");document.getElementById(e).style.display="block"})}),document.getElementById("submitExam").addEventListener("click",function(){let t=0,e=0;m.forEach(n=>{var d,c;e+=n.points;const r=((d=document.querySelector(`[name="answer${n.id}"]:checked`))==null?void 0:d.value)||((c=document.getElementById(`answer${n.id}`))==null?void 0:c.value);r&&r.trim().toLowerCase()===n.correct_answer.trim().toLowerCase()&&(t+=n.points)});const o=t/e*100,a=o>=s;document.getElementById("userScore").textContent=`${o.toFixed(2)}%`,document.getElementById("passingScore").textContent=`${s}%`,document.getElementById("resultMessage").textContent=a?"Congratulations! You passed the exam.":"Sorry, you did not pass the exam. Please try again.",document.getElementById("restartExam").style.display=a?"none":"inline-block",new bootstrap.Modal(document.getElementById("resultModal")).show(),a&&i(l)}),document.getElementById("restartExam").addEventListener("click",function(){location.reload()});function i(t){fetch("/dev/corpu2/simapeka/public/exam-progress",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({exam_id:t})}).then(e=>e.json()).then(e=>{console.log("Exam progress updated:",e)}).catch(e=>{console.error("Error updating exam progress:",e)})}});
