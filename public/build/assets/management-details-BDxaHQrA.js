document.addEventListener("DOMContentLoaded",function(){const c=document.querySelector('meta[name="csrf-token"]').getAttribute("content");document.getElementById("open-add-section-modal").addEventListener("click",function(){new bootstrap.Modal(document.getElementById("addSectionModal")).show()}),document.getElementById("addSectionForm").addEventListener("submit",function(o){o.preventDefault();const n=document.getElementById("sectionTitle").value,t=document.getElementById("sectionOrder").value,r=document.getElementById("submit-add-section").getAttribute("data-course-id");fetch(`/dev/corpu2/simapeka/public/courses/${r}/sections`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":c},body:JSON.stringify({title:n,order:t})}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{e.success?location.reload():alert(e.message||"An error occurred.")}).catch(e=>{console.error("Error:",e),alert("Something went wrong. Please try again.")})}),document.querySelectorAll(".edit-section").forEach(o=>{o.addEventListener("click",function(){const n=this.getAttribute("data-id"),t=this.getAttribute("data-title"),r=this.getAttribute("data-order");document.getElementById("editSectionId").value=n,document.getElementById("editSectionTitle").value=t,document.getElementById("editSectionOrder").value=r,new bootstrap.Modal(document.getElementById("editSectionModal")).show()})}),document.getElementById("editSectionForm").addEventListener("submit",function(o){o.preventDefault();const n=document.getElementById("editSectionId").value,t=document.getElementById("editSectionTitle").value,r=document.getElementById("editSectionOrder").value;fetch(`/dev/corpu2/simapeka/public/courses/sections/${n}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":c},body:JSON.stringify({title:t,order:r})}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{e.success?location.reload():alert(e.message||"An error occurred.")}).catch(e=>{console.error("Error:",e),alert("Something went wrong. Please try again.")})}),document.querySelectorAll(".delete-section").forEach(o=>{o.addEventListener("click",function(){const n=this.getAttribute("data-id");confirm("Are you sure you want to delete this section?")&&fetch(`/dev/corpu2/simapeka/public/courses/sections/${n}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":c}}).then(t=>t.json()).then(t=>{t.success?location.reload():alert(t.message||"An error occurred.")}).catch(t=>{console.error("Error:",t),alert("Something went wrong. Please try again.")})})})});
