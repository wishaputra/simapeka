document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("quizForm"),c=new bootstrap.Modal(document.getElementById("quizModal"));document.getElementById("open-add-quiz-modal").addEventListener("click",()=>{i.reset(),c.show()}),document.querySelectorAll(".edit-quiz").forEach(o=>{o.addEventListener("click",()=>{const n=o.dataset.id;fetch(`/dev/corpu2/simapeka/public/quizzes/${n}`).then(e=>e.json()).then(e=>{document.getElementById("quiz-id").value=e.id,document.getElementById("quiz-title").value=e.title,document.getElementById("quiz-points").value=e.points,document.getElementById("quiz-duration").value=e.duration,document.getElementById("quiz-status").value=e.status,c.show()})})}),document.querySelectorAll(".delete-quiz").forEach(o=>{o.addEventListener("click",()=>{const n=o.dataset.id,e=document.querySelector('meta[name="csrf-token"]').content;confirm("Are you sure you want to delete this quiz?")&&fetch(`/dev/corpu2/simapeka/public/quizzes/${n}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":e,"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success?location.reload():alert(t.message||"Error deleting quiz")}).catch(t=>{console.error("Error:",t),alert("An error occurred. Please try again.")})})}),i.addEventListener("submit",o=>{o.preventDefault();const n=new FormData(i),e=n.get("id"),t=e?`/dev/corpu2/simapeka/public/quizzes/${e}`:"/dev/corpu2/simapeka/public/quizzes";fetch(t,{method:e?"PUT":"POST",body:n,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(u=>u.json()).then(u=>{u.success?location.reload():alert("Error saving quiz")})})});
